# 前言

## Go语言起源

编程语言的演化跟生物物种的演化类似，一个成功的编程语言的后代一般都分继承它们的祖先的优点；当然有时多种语言杂合也可能产生令人惊讶的特性；还有一些激进的新特性可能并没有先例。通过观察这些影响，我们可以学到为什么一门语言是这样的，它已经适应了怎样的环境。



Go语言有时候被描述为"C类似语言"，或"21世纪的C语言"。Go从C语言继承了相似的表达式语法、控制流程结构、基础数据类型、调用参数值、指针等很多思想，还有C语言一直所看中的编译后机器码的运行效率以及和现有操作系统的无缝适配。



但在Go语言的家庭树中还有其它的祖先。其中一个有影响力的分支来自Niklaus Wirth所设计的Pascal语言。然后Modula-2语言激发了包的概念。然后Oberon语言摒弃了模块接口文件和模块实现文件之间的区别。第二代的Oberon-2语言直接影响了包的导入和声明的语法，还有Oberon语言的面向对应特性所提供的方法的声明语法等。

// TODO LIST

## Go语言项目

所有的编程语言都反映了语言设计都对编程哲学的反思，通常包括之前的语言所暴露的一些不足地方的改进。Go项目是在Google公司维护超级复杂的几个软件系统遇到的一些问题的反思。

下发kRob Pike所说，"软件的复杂性是乘法级相关的"，通过增加一部分的复杂性来修复问题通常将慢慢地增加其他部分的复杂性。通过增加功能、选项和配置是修复问题的最快途径，但是这很容易让人忘记简洁的内涵，即从长远来看，简洁依然是好软的关键因素。



## 本书的组织 

我们假设你已经有一种或多种其他编程语言的使用经历，不管是类似C、C++或Java的编译型语言，还是类似Python、Ruby、JavaScript等脚本语言，因此我们不会像对完全的编程语言初学者那样解释所有的细节。因为，Go语言的变量、常量、表达式、控制流程和函数等基础语法也是类似的。



第一章包含了本教程的基本结构，通过十风个程序介绍了用Go语言如何实现类似读写文件、文本格式化、创建图像、网络客户端和服务器通讯等日常工作。



第二章描述了Go语言程序的基本元素结构、变量、新类型定义、包和文件、以及作用域等概念。



第三章讨论了数字、布尔值、字符串和常量，并演示了如何显示和处理Unicode字符。



第四章描述了复合类型，从简单的数组、字典、切片到动态列表。



第五章、涵盖了函数、并讨论了错误处理、panic和recover，还有defer语句。



第一章到第五间是基础部分，主流命令式编程语言这部分类似。个别之处，Go语言有自己特色的语法和风格，但是大多数程序员能很快适应。其余章节是Go语言特有的： 方法、接口、并发、包、测试和反射等语言特性。



Go语言的面向对象机制与一般语言不同。它没有类层次结构，甚至可以说没有类；仅仅通过组合(而不是继承)简单的对象来构建复杂的对象。方法不仅可以定义在结构体上，而且，可以定义在任何用户定义的类型上；并且，具体类型和抽象类型(接口)之间的关系是隐式的，所以很多类型的设计者可能并不知道该类型到底实现了哪些接口。方法在第六章讨论，接口在第七章讨论。



第八章讨论了基于顺序通信进程(CSP)概念的并发编程，使用goruntines和channels处理并发编程。



第九章则讨论了传统的基于共享变量的并发编程



第十章描述了包机制和包的组织结构。这一章还展示了如何有效地利用Go自带的工具，使用单个命令完成编译、测试、基准测试、代码格式化、文档以及其他诸多任务



第十一章讨论了单元测试，Go语言的工具和标准库中集成了经量级的测试功能，避免了强大但复杂的测试框架。测试库提供了一些基本构件，必要时用来构建复杂的测试构件。



第十二章讨论了反射，一种程序在运行期间审视自己的能力。反射是一个强大的编程工具，不过要谨慎地合适的使用；这一章利用反射机制实现一些重要的Go语言库函数，展示了的强大用法。



第十三章解释了底层编程的细节，在必要时，可以合租unsafe包绕过Go语言安全的类型系统。



# 入门

## Hello,World

`ch1/helloworld.go`

```golang
package main

import "fmt"

func main(){
	fmt.Println("Hello,世界")
}
```

Go是一门编译型语言，Go语言的工具链将源代码及其依赖转换成计算机的机器指令。Go语言提供的工具都通过一个单独的命令`go`调用，`go`命令有一系列子命令。最简单的一个子命令就是run。这个命令编译一个或多个以`.go`结尾的源文件，链接库文件，并运行最终生成的可执行文件。

```bash
go run helloworld.go
```

这个命令会输出:

```bash
Hello，世界
```

Go语言原生支持Unicode，它可以处理全世界的任何语言的文本。

如果不只是一次性实验，希望保存编译结果以备将来之前，可以用build子命令:

```bash
go build helloworld.go
```

这个命令生成一个名为`helloworld`的可执行的二进制文件，之后可以随时运行它，不需要任何处理。

```bash
./helloworld
Hello，世界
```

Go语言的代码通过**包**(package)组织，包类似其它语言里的库(libraries)或者模块(modules)。一个包由位于单个目录下的一个或多个`.go`源代码文件组成，目录定义包的作用。每个源文件都以一条`package`声明语句开始，这个例子里就是`package main`，表示该文件属于哪个包，紧跟着一系列导入(import)的包，之后是存储在这个文件里的程序诗句。

Go的标准库提供了100多个包，以支持常见的功能，如输入、输出、排序以及文本处理。比如`fmt`包，就含有格式化输出、接收输入的函数。`Pringln`是其中一个基础函数，可以打印以空格间隔的一个或多个值，并在最后添加一个换行符，从而输出一整行。

`main`包比较特殊，它定义了一个独立可执行的程序，而不是一个库。在`main`里的`main`函数也很特殊，它是整个程序执行时的入口。`main`函数所做的事情就是程序做的。当然了，`main`函数一般调用其它包里的函数完成很多工作，比如`fmt.Pringln`。

必须告诉编译器源文件需要哪些包，用`package`声明后面的`import`来导入这些包。`hello world`程序仅使用了一个来自于其他包的函数，而大多数程序可能导入更多的包。

必须恰当导入需要的包，缺少了必要的包或导入不需要的包，程序都无法编译通过。这项严格要求避免了程序开发过程中引入 未使用的包。

`import`声明必要跟在文件的`package`声明之后，随后，则是组成程序的函数、变量、常量、类型声明语句(由关键字`func`,`var`,`const`,`type定义`)。这些内容的声明顺序并不重要。

一人函数的声明由`func`关键字、函数名、参数列表、返回值列表(这个例子里的`main`函数参数列表和返回值列表都是空的)，以及包含在大括号里的函数体组成。

Go语言不需在语句或声明的末尾添加分号，除非一行上有多条语句。实际上，编译器会主动地把特定符号后的换行符转换为分号，因此换行符添加的位置会影响Go代码的正确解析（比如行末是标识符、整数、浮点数、虚数、字符或字符串文字、关键字`break`,`continue`,`fallthrugh`,`return`中的一个、运算符和分隔符`++`,`--`,`)`,`]`或`}`中的一个）。比如，函数在左操作`{`必须和`func`函数声明在同一行上，且位于末尾，不能独间点一行，而表达式`x+y`中可在`+`后换行，不能在`+`前换行。

Go语言在代码格式上采取了很强硬的态度。`gofmt`工具把代码格式化为标准格式，`go`工具中的`fmt`子命令使用`gofmt`工具格式化指定包里的所有文件或当前上当 中的文件(默认情况下)。

许多文本编辑器可以配置为每次在保存时自动运行`gofmt`，因此源文件总可以保持正确的形式。此外，一个相关的工具`goimports`可以按需管理导入声明的插入和移除。它不是标准发布版的一部分，可以通过执行下面的命令获取到：

```bash
go get golang.org/x/tools/cmd/goimports
```



## 命令行参数



## 查找重复的行



## GIF动画



## 获取URL



## 并发获取多个URL



## Web服务



## 本章要点



#  程序结构

## 命名



## 声明



## 变量



## 赋值



## 类型



## 包和文件





## 作用域



# 基础数据类型







